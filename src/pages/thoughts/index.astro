---
import TagLinks from "@components/TagLinks.astro";
import Layout from "@layouts/Layout.astro";
import { dateFormatter, getTags, sortByDate } from "@lib/util";
import { getCollection } from "astro:content";

const thoughts = sortByDate(await getCollection("thoughts"));
---

<Layout title="thoughts">
	<section>
		<h1>thoughts</h1>
		<p>
			A collection of different thoughts that seemed worth sharing, such as things I have learned, tutorials for how to accomplish something, and opinions on books/games/tech
		</p>

		{
			thoughts.map(async (post) => {
				const tags = await getTags(post);

				return <article class="content-item">
					<h2><a href={"/thoughts/" + post.id}>{ post.data.title }</a></h2>
					<p><TagLinks tags={tags}/></p>
					<p>{ dateFormatter.format(post.data.date) }</p>
					<p>{ post.data.description }</p>
				</article>
			})
		}
	</section>
</Layout>

<style>
	body {
		--theme: var(--thoughts);
	}
</style>
